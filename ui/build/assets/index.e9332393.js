import{V as e,m as t,C as a}from"./vendor.eee07c58.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const i=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,o)=>{const n=new URL(e,i);if(self[t].moduleMap[n])return a(self[t].moduleMap[n]);const r=new Blob([`import * as m from '${n}';`,`${t}.moduleMap['${n}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){o(new Error(`Failed to import: ${e}`)),s(l)},onload(){a(self[t].moduleMap[n]),s(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("assets/");function i(e,t,a,i,s,o,n,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=l):s&&(l=r?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var p=c.render;c.render=function(e,t){return l.call(t),p(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}const s={};var o=i({name:"Header",props:{capabilities:Object},data:()=>({})},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"header"}},[a("h1",[e._v("Tegola ("+e._s(e.capabilities.version)+")")])])}),[],!1,(function(e){for(let t in s)this[t]=s[t]}),"1fcf22cc",null,null);o.options.__file="src/components/Header.vue";var n=o.exports;const r=e.observable({activeMap:null,apiRoot:null,capabilities:null,mbglIsReady:!1}),l={setActiveMap(e){r.mbglIsReady=!1,r.activeMap=e},setApiRoot(e){r.apiRoot=e},setCapabilities(e){r.capabilities=e},setMbglIsReady(e){r.mbglIsReady=e}};const c={name:"MapRow",props:{map:Object},methods:{setActiveMap:l.setActiveMap}},p={};var d=i(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{on:{click:function(t){return t.target!==t.currentTarget?null:e.setActiveMap(e.map)}}},[e._v("\n  "+e._s(e.map.name)),a("img",{staticClass:"arrow",attrs:{src:"./assets/arrow.344b5b41.svg"}})])}),[],!1,(function(e){for(let t in p)this[t]=p[t]}),"2aca3bec",null,null);d.options.__file="src/components/LeftNav/MapRow.vue";var u=d.exports,v=null;const m={map(e){v=e}};const f={};var h=i({name:"MapLayerRow",props:{layer:Object},computed:{zoomRange(){return"z"+this.layer.minzoom+"-"+this.layer.maxzoom}},data:()=>({visibility:"visible"}),methods:{toggleLayerVisibility(e){"visible"===v.getLayoutProperty(e,"visibility")?(v.setLayoutProperty(e,"visibility","none"),this.visibility="hidden"):(v.setLayoutProperty(e,"visibility","visible"),this.visibility="visible")},getLayerColor(e){let t,a=v.getLayer(e);switch(a.type){case"fill":t="fill-outline-color";break;case"line":t="line-color";break;case"circle":t="circle-color";break;default:console.log("unsupported layer type: "+a.type)}return t?v.getPaintProperty(e,t):"#000"}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{on:{click:function(t){return e.toggleLayerVisibility(e.layer.name)}}},[a("div",{staticClass:"layer-color",style:{"background-color":e.getLayerColor(e.layer.name),visibility:e.visibility}}),e._v(" "),a("div",{staticClass:"layer-name"},[e._v("\n    "+e._s(e.layer.name)+"\n  ")]),e._v(" "),a("div",{staticClass:"layer-zoom-range"},[e._v(e._s(e.zoomRange))])])}),[],!1,(function(e){for(let t in f)this[t]=f[t]}),"197ccc68",null,null);h.options.__file="src/components/LeftNav/MapLayerRow.vue";var _=h.exports;const b={};var g=i({name:"LeftNav",components:{MapRow:u,MapLayerRow:_},props:{capabilities:Object},data:()=>({inspectorIsActive:!1,inspector:null,sidebarToggleClass:null}),computed:{activeMap:()=>r.activeMap,mapIsReady:()=>r.mbglIsReady},methods:{togglesidebar(){"sidebar-collapsed"===this.sidebarToggleClass?this.sidebarToggleClass="sidebar-expanded":this.sidebarToggleClass="sidebar-collapsed"},toggleFeatureInspector(){this.inspector||(this.inspector=new t.Popup),this.inspectorIsActive?(v.off("mousemove",this.inspectFeatures),this.inspectorIsActive=!1,this.inspector.isOpen()&&(this.inspector.remove(),this.inspector=null)):(v.on("mousemove",this.inspectFeatures),this.inspectorIsActive=!0)},inspectFeatures(e){for(var t="",a=10,i=10,s=v.queryRenderedFeatures([[e.point.x-a/2,e.point.y-i/2],[e.point.x+a/2,e.point.y+i/2]]),o=["name","type","featurecla"],n=0,r=s.length;n<r;n++)t+="<h4>"+s[n].layer.id+"</h4>",t+="<ul>",t+='<li>feature id <span class="float-r">'+s[n].id+"</span></li>",o.forEach((function(e){void 0!==s[n].properties[e]&&(t+="<li>"+e+'<span class="float-r">'+s[n].properties[e]+"</span></li>")})),Object.keys(s[n].properties).sort().forEach((function(e){o.indexOf(e)<0&&(t+="<li>"+e+'<span class="float-r">'+s[n].properties[e]+"</span></li>")})),t+="</ul>";""!=t?this.inspector.setLngLat(e.lngLat).setHTML(t).addTo(v):this.inspector.isOpen()&&this.inspector.remove()},showAllMaps(){this.removeHash(),l.setActiveMap(null)},removeHash(){history.pushState("",document.title,window.location.pathname+window.location.search)}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar",class:e.sidebarToggleClass,attrs:{id:"left-nav"}},[a("div",{staticClass:"toggle",on:{click:e.togglesidebar}},[a("svg",{staticClass:"toggle-arrow",attrs:{width:"2em",height:"2em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M5.854 4.646a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L3.207 8l2.647-2.646a.5.5 0 0 0 0-.708z"}}),e._v(" "),a("path",{attrs:{"fill-rule":"evenodd",d:"M10 8a.5.5 0 0 0-.5-.5H3a.5.5 0 0 0 0 1h6.5A.5.5 0 0 0 10 8zm2.5 6a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 1 0v11a.5.5 0 0 1-.5.5z"}})])]),e._v(" "),a("h2",[a("span",{on:{click:e.showAllMaps}},[e._v("Maps")]),e._v(" "),e.activeMap?a("span",[e._v("/ "+e._s(e.activeMap.name))]):e._e()]),e._v(" "),a("div",{staticClass:"container"},[e.activeMap?e._e():a("ul",{attrs:{id:"maps-list"}},e._l(e.capabilities.maps,(function(e){return a("MapRow",{key:e.name,attrs:{map:e}})})),1),e._v(" "),e.activeMap&&e.mapIsReady?a("ul",{attrs:{id:"map-layers-list"}},e._l(e.activeMap.layers,(function(e){return a("MapLayerRow",{key:e.name,attrs:{layer:e}})})),1):e._e()]),e._v(" "),e.activeMap?a("div",{attrs:{id:"left-nav-footer"}},[a("div",{staticClass:"btn",class:{active:e.inspectorIsActive},on:{click:e.toggleFeatureInspector}},[a("span",{staticClass:"dot"}),e._v("Inspect Features\n    ")])]):e._e()])}),[],!1,(function(e){for(let t in b)this[t]=b[t]}),"23080606",null,null);g.options.__file="src/components/LeftNav/LeftNav.vue";var y=g.exports;class M{onAdd(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._container.style.color="#f00",this._container.onclick=function(){e.showTileBoundaries=!e.showTileBoundaries};let t=document.createElement("button");return t.title="Toggle tile boundaries",t.className="mapboxgl-ctrl-icon mapboxgl-ctrl-toggle-tile-boundaries",this._container.appendChild(t),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}}const w={};var C=i({name:"Mapbox",mounted(){let e=r.apiRoot+"maps/"+r.activeMap.name+"/style.json",a=new t.Map({container:"map",style:e,hash:!0});a.on("load",(function(){let e=new t.NavigationControl;a.addControl(e,"bottom-right");let i=new M;a.addControl(i,"bottom-right")})),a.on("styledata",(function(){r.mbglIsReady||l.setMbglIsReady(!0)})),m.map(a)}},(function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"map"}})}),[],!1,(function(e){for(let t in w)this[t]=w[t]}),"b2a2702c",null,null);C.options.__file="src/components/Mapbox.vue";var R=C.exports;const L={};var x=i({name:"Tegola Viewer",components:{Header:n,LeftNav:y,Mapbox:R},computed:{activeMap:()=>r.activeMap,capabilities:()=>r.capabilities},methods:{compareMaps(e,t){const a=e.name.toLowerCase(),i=t.name.toLowerCase();let s=0;return a>i?s=1:a<i&&(s=-1),s}},created:function(){const e=this;l.setApiRoot(""),a.get("capabilities").then((function(t){t.data.maps.sort(e.compareMaps),l.setCapabilities(t.data),1===t.data.maps.length&&l.setActiveMap(t.data.maps[0])})).catch((function(e){console.log(e)}))},data:function(){return{}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e.capabilities&&e.activeMap?a("Mapbox"):e._e(),e._v(" "),e.capabilities?a("Header",{attrs:{capabilities:e.capabilities}}):e._e(),e._v(" "),e.capabilities?a("LeftNav",{attrs:{capabilities:e.capabilities}}):e._e()],1)}),[],!1,(function(e){for(let t in L)this[t]=L[t]}),null,null,null);x.options.__file="src/App.vue";var A=x.exports;e.config.productionTip=!1,new e({render:e=>e(A)}).$mount("#app");
