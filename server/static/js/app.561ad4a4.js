(function(t){function e(e){for(var i,r,s=e[0],c=e[1],l=e[2],u=0,f=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&f.push(n[r][0]),n[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);p&&p(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],i=!0,s=1;s<a.length;s++){var c=a[s];0!==n[c]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},n={app:0},o=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("85ec"),n=a.n(i);n.a},"0d15":function(t,e,a){"use strict";var i=a("6d00"),n=a.n(i);n.a},"294a":function(t,e,a){"use strict";var i=a("6f86"),n=a.n(i);n.a},"4ea0":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.capabilities&&t.activeMap?a("Mapbox"):t._e(),t.capabilities?a("Header",{attrs:{capabilities:t.capabilities}}):t._e(),t.capabilities?a("LeftNav",{attrs:{capabilities:t.capabilities}}):t._e()],1)},o=[],r=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"header"}},[a("h1",[t._v("Tegola ("+t._s(t.capabilities.version)+")")])])}),s=[],c={name:"Header",props:{capabilities:Object}},l=c,p=(a("0d15"),a("2877")),u=Object(p["a"])(l,r,s,!1,null,"7afac53e",null),f=u.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"left-nav"}},[a("h2",[a("span",{on:{click:t.showAllMaps}},[t._v("Maps")]),t._v(" "),t.activeMap?a("span",[t._v("/ "+t._s(t.activeMap.name))]):t._e()]),a("div",{staticClass:"container"},[t.activeMap?t._e():a("ul",{attrs:{id:"maps-list"}},t._l(t.capabilities.maps,(function(t){return a("MapRow",{key:t.name,attrs:{map:t}})})),1),t.activeMap&&t.mapIsReady?a("ul",{attrs:{id:"map-layers-list"}},t._l(t.activeMap.layers,(function(t){return a("MapLayerRow",{key:t.name,attrs:{layer:t}})})),1):t._e()]),t.activeMap?a("div",{attrs:{id:"left-nav-footer"}},[a("div",{staticClass:"btn",class:{active:t.inspectorIsActive},on:{click:t.toggleFeatureInspector}},[a("span",{staticClass:"dot"}),t._v("Inspect Features ")])]):t._e()])},v=[],b=(a("4160"),a("c975"),a("b64b"),a("ac1f"),a("841c"),a("159b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{on:{click:function(e){return e.target!==e.currentTarget?null:t.setActiveMap(t.map)}}},[t._v(" "+t._s(t.map.name)),i("img",{staticClass:"arrow",attrs:{src:a("d4d9")}})])}),m=[],h=i["a"].observable({activeMap:null,apiRoot:null,capabilities:null,mbglIsReady:!1}),y={setActiveMap:function(t){h.mbglIsReady=!1,h.activeMap=t},setApiRoot:function(t){h.apiRoot=t},setCapabilities:function(t){h.capabilities=t},setMbglIsReady:function(t){h.mbglIsReady=t}},g={name:"MapRow",props:{map:Object},methods:{setActiveMap:y.setActiveMap}},_=g,M=(a("294a"),Object(p["a"])(_,b,m,!1,null,"180ee099",null)),w=M.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{on:{click:function(e){return t.toggleLayerVisibility(t.layer.name)}}},[a("div",{staticClass:"layer-color",style:{"background-color":t.getLayerColor(t.layer.name),visibility:t.visibility}}),a("div",{staticClass:"layer-name"},[t._v(" "+t._s(t.layer.name)+" ")]),a("div",{staticClass:"layer-zoom-range"},[t._v(t._s(t.zoomRange))])])},x=[],R=null,j={map:function(t){R=t}},L={name:"MapLayerRow",props:{layer:Object},computed:{zoomRange:function(){return"z"+this.layer.minzoom+"-"+this.layer.maxzoom}},data:function(){return{visibility:"visible"}},methods:{toggleLayerVisibility:function(t){var e=R.getLayoutProperty(t,"visibility");"visible"===e?(R.setLayoutProperty(t,"visibility","none"),this.visibility="hidden"):(R.setLayoutProperty(t,"visibility","visible"),this.visibility="visible")},getLayerColor:function(t){var e,a=R.getLayer(t);switch(a.type){case"fill":e="fill-outline-color";break;case"line":e="line-color";break;case"circle":e="circle-color";break;default:console.log("unsupported layer type: "+a.type)}return e?R.getPaintProperty(t,e):"#000"}}},C=L,k=(a("67db"),Object(p["a"])(C,O,x,!1,null,"1811ccab",null)),A=k.exports,I=a("d5f2"),P={name:"LeftNav",components:{MapRow:w,MapLayerRow:A},props:{capabilities:Object},data:function(){return{inspectorIsActive:!1,inspector:null}},computed:{activeMap:function(){return h.activeMap},mapIsReady:function(){return h.mbglIsReady}},methods:{toggleFeatureInspector:function(){this.inspector||(this.inspector=new I.Popup),this.inspectorIsActive?(R.off("mousemove",this.inspectFeatures),this.inspectorIsActive=!1,this.inspector.isOpen()&&(this.inspector.remove(),this.inspector=null)):(R.on("mousemove",this.inspectFeatures),this.inspectorIsActive=!0)},inspectFeatures:function(t){for(var e="",a={width:10,height:10},i=R.queryRenderedFeatures([[t.point.x-a.width/2,t.point.y-a.height/2],[t.point.x+a.width/2,t.point.y+a.height/2]]),n=["name","type","featurecla"],o=0,r=i.length;o<r;o++)e+="<h4>"+i[o].layer.id+"</h4>",e+="<ul>",e+='<li>feature id <span class="float-r">'+i[o].id+"</span></li>",n.forEach((function(t){"undefined"!==typeof i[o].properties[t]&&(e+="<li>"+t+'<span class="float-r">'+i[o].properties[t]+"</span></li>")})),Object.keys(i[o].properties).sort().forEach((function(t){n.indexOf(t)<0&&(e+="<li>"+t+'<span class="float-r">'+i[o].properties[t]+"</span></li>")})),e+="</ul>";""!=e?this.inspector.setLngLat(t.lngLat).setHTML(e).addTo(R):this.inspector.isOpen()&&this.inspector.remove()},showAllMaps:function(){this.removeHash(),y.setActiveMap(null)},removeHash:function(){history.pushState("",document.title,window.location.pathname+window.location.search)}}},E=P,T=(a("bab0"),Object(p["a"])(E,d,v,!1,null,"8350aa7c",null)),F=T.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"map"}})},$=[],z=(a("d81d"),a("d4ec")),H=a("bee2"),S=function(){function t(){Object(z["a"])(this,t)}return Object(H["a"])(t,[{key:"onAdd",value:function(t){this._map=t,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._container.style.color="#f00",this._container.onclick=function(){t.showTileBoundaries=!t.showTileBoundaries};var e=document.createElement("button");return e.title="Toggle tile boundaries",e.className="mapboxgl-ctrl-icon mapboxgl-ctrl-toggle-tile-boundaries",this._container.appendChild(e),this._container}},{key:"onRemove",value:function(){this._container.parentNode.removeChild(this._container),this._map=void 0}}]),t}(),B=a("d5f2"),J={name:"Mapbox",mounted:function(){var t=h.apiRoot+"maps/"+h.activeMap.name+"/style.json",e=new B.Map({container:"map",style:t,hash:!0});e.on("load",(function(){var t=new B.NavigationControl;e.addControl(t,"bottom-right");var a=new S;e.addControl(a,"bottom-right")})),e.on("styledata",(function(){h.mbglIsReady||y.setMbglIsReady(!0)})),j.map(e)}},V=J,q=(a("df74"),Object(p["a"])(V,N,$,!1,null,"1fbdbe7a",null)),D=q.exports,G=a("bc3a"),K="";var Q={name:"App",components:{Header:f,LeftNav:F,Mapbox:D},computed:{activeMap:function(){return h.activeMap},capabilities:function(){return h.capabilities}},methods:{compareMaps:function(t,e){var a=t.name.toLowerCase(),i=e.name.toLowerCase(),n=0;return a>i?n=1:a<i&&(n=-1),n}},created:function(){var t=this;y.setApiRoot(K),G.get(K+"capabilities").then((function(e){e.data.maps.sort(t.compareMaps),y.setCapabilities(e.data),1===e.data.maps.length&&y.setActiveMap(e.data.maps[0])})).catch((function(t){console.log(t)}))},data:function(){return{}}},U=Q,W=(a("034f"),Object(p["a"])(U,n,o,!1,null,null,null)),X=W.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(X)}}).$mount("#app")},"67db":function(t,e,a){"use strict";var i=a("86af"),n=a.n(i);n.a},"6d00":function(t,e,a){},"6f86":function(t,e,a){},"85ec":function(t,e,a){},"86af":function(t,e,a){},bab0:function(t,e,a){"use strict";var i=a("4ea0"),n=a.n(i);n.a},d4d9:function(t,e,a){t.exports=a.p+"img/arrow.606d0da4.svg"},d5f2:function(t,e){t.exports=mapboxgl},df74:function(t,e,a){"use strict";var i=a("f6ef"),n=a.n(i);n.a},f6ef:function(t,e,a){}});
//# sourceMappingURL=app.561ad4a4.js.map